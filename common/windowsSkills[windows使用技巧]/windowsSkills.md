# 1、查找

## 1.1、如何查看某个端口被谁占用

查看被占用端口对应的PID，输入命令：netstat -aon|findstr "49157"，回车，记下最后一位数字，即PID,这里是2720

![](files\port_usage_findPid.png)

继续输入tasklist|findstr "2720"，回车，查看是哪个进程或者程序占用了2720端口，结果是：svchost.exe

![](files\port_usage_findProgramName.png)

或者是我们打开任务管理器，切换到进程选项卡，在PID一列查看2720对应的进程是谁，如果看不到PID这一列,如下图：

![](files\port_usage_taskMgrFindProgramName.png)

结束该进程：在任务管理器中选中该进程点击”结束进程“按钮，或者是在cmd的命令窗口中输入：taskkill /f /t /im Tencentdl.exe。

![](files\port_usage_killProgram.jpg)



## 1.2、如何查看文件被谁占用

1、右击任务栏，启动任务管理器；

2、选择“性能“选项卡，点击“资源监视器”；

3、点击“CPU”选项卡，在“关联的句柄”右侧的“搜索句柄”输入框输入文件名或文件夹名并点击搜索

![](files\file_usage.png)



# 2、Bat & Console

## 2.1、常用命令

- **call**

  `call` 调用另一个批处理文件（如果不用`call`而直接调用别的批处理文件，那么执行完那个批处理文件后将无法返回当前文件并执行当前文件的后续命令）

- **echo**

  `echo` 表示显示此命令后的字符

  `echo off` 表示在此语句后所有运行的命令都不显示命令行本身

  `@`加在每个命令行的最前面，表示运行时不显示这一行的命令行（只能影响当前行）

  因此我们常见的命令大多是`@echo off`

- **pause**

  `pause` 运行此句会暂停批处理的执行并在屏幕上显示Press any key to continue...的提示，等待用户按任意键后继续

- **rem**

  `rem` 表示此命令后的字符为解释行（注释），不执行，只是给自己今后参考用的（相当于程序中的注释）

- **errorlevel**

  当使用 `if errorlevel 值 cmmand` 句式时，它的含义是：如果返回的错误码值大于或等于值 的时候，将执行cmmand操作；

  当使用 `if %errorlevel%==值 cmmand` 句式时，它含义是：如果返回的错误码值等于值 的时候，将执行cmmand操作。

  一般上一条命令的执行结果返回的值只有两个，"成功"用0 表示、"失败"用 1 表示，实际上，errorlevel 返回值可以在0~255 之间。

- 



## 2.2、内置变量和参数

批处理参数扩展变量（%0 到 %9）。当在批处理文件中使用批处理参数时，%0 将由批处理文件名替换，而 %1 到 %9 将由在命令行键入的相应参数替换。

可以在批处理参数中使用编辑符。编辑符使用当前的驱动器和目录信息将批处理参数扩展为部分或完整的文件或目录名。要使用编辑符，请键入百分号 (%) 字符，后面是波形符号 (~) 字符，然后键入合适的编辑符（即 %~modifier）。

下表列出了可在扩展中使用的编辑符。

| 编辑符   | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| %~       | %~1 扩展 %1 并删除任何引号 (")                               |
| %~f      | %~f1 将 %1 扩展到完全合格的路径名                            |
| %~d      | %~d1 将 %1 扩展到驱动器盘符                                  |
| %~p      | %~p1 将 %1 扩展到路径                                        |
| %~n      | %~n1 将 %1 扩展到文件名                                      |
| %~x      | %~x1 将 %1 扩展到文件扩展名                                  |
| %~s      | %~s1 扩展的路径仅包含短名称                                  |
| %~a      | %~a1 将 %1 扩展到文件属性                                    |
| %~t      | %~t1 将 %1 扩展到文件日期/时间                               |
| %~z      | %~z1 将 %1 扩展到文件大小                                    |
| %~$PATH: | %~$PATH:1 搜索 PATH 环境变量中列出的目录，并将 %1 扩展到第一个找到的目录的完全合格名称。如果没有定义环境变量名称，或没有找到文件，则此编辑符扩展成空字符串 |

下表列出了可用于获取复杂结果的编辑符和限定符的可能组合情况：

| 编辑符      | 说明                                                         |
| ----------- | ------------------------------------------------------------ |
| %~dp0       | 将 %0 扩展到驱动器盘符+路径+文件名+扩展名                    |
| %~nx1       | 将 %1 扩展到文件名和扩展名                                   |
| %~dp$PATH:1 | 在 PATH 环境变量列出的目录中搜索 %1，并扩展到第一个找到的目录的驱动器盘符和路径 |
| %~dpn0      | 将%0扩展到驱动器盘符+路径+文件名                             |
| %~ftza1     | 将 %1 扩展到类似 dir 的输出行                                |

注意：在上面的例子中，可以使用其它批处理参数替换 %1 和 PATH。
%* 编辑符是唯一可代表在批处理文件中传递的所有参数的编辑符。不能将该编辑符与 %~ 编辑符组合使用。%~ 语法必须通过有效的参数值来终止。

不能以与使用环境变量相同的方式使用批处理参数。不能搜索或替换值，或检查子字符串。然而，可以将参数分配给环境变量，然后使用该环境变量。















